"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e,r=require("react"),n=(t=r)&&"object"==typeof t&&"default"in t?t.default:t,a=function(){function t(t,e,r,n){this.x=t,this.y=e,this.opacity=r,this.canvas=n,this.length=Math.floor(2*Math.random())+1,this.factor=1,this.increment=.03*Math.random()}return t.prototype.draw=function(){var t=this.canvas.getContext("2d");this.opacity>1?this.factor=-1:this.opacity<=0&&(this.factor=1),this.opacity+=this.increment*this.factor,t&&(t.beginPath(),t.fillRect(this.x,this.y,this.length,this.length),t.closePath(),t.fillStyle="rgba(255, 255, 255, 1)",t.fill(),t.restore())},t}();function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function s(t,e){if(null==t)return{};var r,n,a={},i=Object.keys(t);for(n=0;n<i.length;n++)e.indexOf(r=i[n])>=0||(a[r]=t[r]);return a}!function(t){t.INIT="INIT",t.FILL_STARS="FILL_STARS",t.RENDER_STARS="RENDER_STARS",t.SET_CANVAS_DIMENSIONS="SET_CANVAS_DIMENSIONS",t.ERROR="ERROR"}(e||(e={}));var o={fps:50,numStars:300,innerWidth:0,innerHeight:0,stars:[]},c=r.createContext(o),u=r.createContext((function(){})),h=function(t,r){switch(r.type){case e.FILL_STARS:case e.SET_CANVAS_DIMENSIONS:return i({},t,r.state);case e.RENDER_STARS:case e.ERROR:return i({},t);default:return t}};function S(){var t=r.useContext(c);if(!t)throw new Error("useSpaceBackgroundState must be used after an SpaceBackgroundStateContext.Provider");return t}function f(){var t=r.useContext(u);if(!t)throw new Error("useSpaceBackgroundDispatch must be used after and SpaceBackgroundDispatchContext.Provider");return t}function d(){return[S(),f()]}function p(t,r){var n=r.width,a=r.height,i=r.canvas;return i.setAttribute("width",String(n)),i.setAttribute("height",String(a)),t({type:e.SET_CANVAS_DIMENSIONS,state:{innerWidth:parseInt(String(n)),innerHeight:parseInt(String(a))}})}function v(t,r){var n=r.innerWidth,i=r.innerHeight,s=r.canvas,o=r.numStars,c=[];if(o){for(var u=0;u<o;u++){var h=Math.round(Math.random()*(null!=n?n:0)),S=Math.round(Math.random()*(null!=i?i:0)),f=.5*Math.random();if(s){var d=new a(h,S,f,s);c.push(d)}}return t({type:e.FILL_STARS,state:{numStars:o,stars:c}})}}function l(t,r){var n=r.innerWidth,a=void 0===n?0:n,i=r.innerHeight,s=void 0===i?0:i,o=r.canvas,c=r.stars,u=void 0===c?[]:c;if(o){var h=o.getContext("2d");return null==h||h.clearRect(0,0,a,s),u.forEach((function(t){t.draw()})),t({type:e.RENDER_STARS,state:{stars:u}})}}exports.SpaceBackground=function(t){var e=t.width,a=void 0===e?0:e,i=t.height,o=void 0===i?0:i,c=s(t,["width","height"]),u=d(),h=u[0],S=u[1],f=h.stars,g=h.numStars,R=h.innerWidth,x=h.innerHeight,E=r.useRef(null);return r.useEffect((function(){var t;(t=E.current)&&p(S,{width:a,height:o,canvas:t})}),[a,o,S,E]),r.useEffect((function(){var t;(t=E.current)&&v(S,{canvas:t,numStars:g,innerWidth:R,innerHeight:x})}),[g,R,x,S,E]),r.useEffect((function(){var t;(t=E.current)&&l(S,{canvas:t,stars:f,innerWidth:R,innerHeight:x})}),[f,R,x,S,E]),n.createElement("canvas",Object.assign({ref:E},c))},exports.SpaceBackgroundDispatchContext=u,exports.SpaceBackgroundProvider=function(t){var e=t.children,a=s(t,["children"]),S=r.useReducer(h,i({},o)),f=S[1];return n.createElement(c.Provider,Object.assign({value:S[0]},a),n.createElement(u.Provider,{value:f},e))},exports.SpaceBackgroundStateContext=c,exports.Star=a,exports.fillStars=v,exports.initialContext=o,exports.renderStar=l,exports.setCanvasDimensions=p,exports.useSpaceBackgroundContext=d,exports.useSpaceBackgroundDispatch=f,exports.useSpaceBackgroundState=S;
//# sourceMappingURL=react-space-background.cjs.production.min.js.map
