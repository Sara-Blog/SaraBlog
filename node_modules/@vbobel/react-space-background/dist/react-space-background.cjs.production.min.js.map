{"version":3,"file":"react-space-background.cjs.production.min.js","sources":["../src/interfaces/SpaceBackground.ts","../src/model/Star.ts","../src/Provider/SpaceBackground.tsx","../src/space-background/SpaceBackground.tsx"],"sourcesContent":["import { Star } from \"../model\";\n\nexport enum ACTION {\n  INIT = \"INIT\",\n  FILL_STARS = \"FILL_STARS\",\n  RENDER_STARS = \"RENDER_STARS\",\n  SET_CANVAS_DIMENSIONS = \"SET_CANVAS_DIMENSIONS\",\n  ERROR = \"ERROR\",\n}\n\nexport interface SpaceBackground {\n  fps?: number;\n  numStars?: number;\n  innerWidth?: number;\n  innerHeight?: number;\n  stars?: Star[];\n  canvas?: HTMLCanvasElement;\n}\n\nexport interface DISPATCH {\n  type?: ACTION;\n  state?: SpaceBackground;\n}\n\nexport interface CanvasDimensions {\n  width: string | number;\n  height: string | number;\n}\n\nexport interface Canvas extends CanvasDimensions {\n  canvas: HTMLCanvasElement;\n}\n","export class Star {\n  private x: number;\n  private y: number;\n  private opacity: number;\n  private canvas: HTMLCanvasElement;\n  private length: number;\n  private factor: number;\n  private increment: number;\n\n  constructor(\n    x: number,\n    y: number,\n    opacity: number,\n    canvas: HTMLCanvasElement\n  ) {\n    this.x = x;\n    this.y = y;\n    this.opacity = opacity;\n    this.canvas = canvas;\n    this.length = Math.floor(Math.random() * 2) + 1;\n    this.factor = 1;\n    this.increment = Math.random() * 0.03;\n  }\n\n  draw() {\n    let ctx = this.canvas.getContext(\"2d\");\n\n    if (this.opacity > 1) {\n      this.factor = -1;\n    } else if (this.opacity <= 0) {\n      this.factor = 1;\n    }\n\n    this.opacity += this.increment * this.factor;\n\n    if (ctx) {\n      ctx.beginPath();\n      ctx.fillRect(this.x, this.y, this.length, this.length);\n      ctx.closePath();\n\n      ctx.fillStyle = \"rgba(255, 255, 255, 1)\";\n\n      ctx.fill();\n\n      ctx.restore();\n    }\n  }\n}\n\nexport default Star;\n","import React, { useContext, useReducer, createContext, Dispatch } from \"react\";\nimport { Star } from \"../model\";\nimport {\n  SpaceBackground,\n  ACTION,\n  DISPATCH,\n  Canvas,\n} from \"../interfaces/SpaceBackground\";\n\nexport const initialContext: SpaceBackground = {\n  fps: 50,\n  numStars: 300,\n  innerWidth: 0,\n  innerHeight: 0,\n  stars: [],\n};\n\nexport const SpaceBackgroundStateContext = createContext<SpaceBackground>(\n  initialContext\n);\n\nexport const SpaceBackgroundDispatchContext = createContext<Dispatch<DISPATCH>>(\n  () => {}\n);\n\nconst spaceBackgroundReducer = (state: SpaceBackground, action: DISPATCH) => {\n  switch (action.type) {\n    case ACTION.FILL_STARS:\n    case ACTION.SET_CANVAS_DIMENSIONS:\n      return {\n        ...state,\n        ...action.state,\n      };\n    case ACTION.RENDER_STARS:\n      return {\n        ...state,\n      };\n    case ACTION.ERROR:\n      return {\n        ...state,\n      };\n    default:\n      return state;\n  }\n};\n\nexport function SpaceBackgroundProvider({\n  children,\n  ...props\n}: {\n  children: any;\n}) {\n  const [state, dispatch] = useReducer(spaceBackgroundReducer, {\n    ...initialContext,\n  });\n\n  return (\n    <SpaceBackgroundStateContext.Provider value={state} {...props}>\n      <SpaceBackgroundDispatchContext.Provider value={dispatch}>\n        {children}\n      </SpaceBackgroundDispatchContext.Provider>\n    </SpaceBackgroundStateContext.Provider>\n  );\n}\n\nexport function useSpaceBackgroundState() {\n  const context = useContext(SpaceBackgroundStateContext);\n\n  if (!context) {\n    throw new Error(\n      \"useSpaceBackgroundState must be used after an SpaceBackgroundStateContext.Provider\"\n    );\n  }\n\n  return context;\n}\n\nexport function useSpaceBackgroundDispatch() {\n  const context = useContext(SpaceBackgroundDispatchContext);\n\n  if (!context) {\n    throw new Error(\n      \"useSpaceBackgroundDispatch must be used after and SpaceBackgroundDispatchContext.Provider\"\n    );\n  }\n\n  return context;\n}\n\nexport function useSpaceBackgroundContext(): [\n  SpaceBackground,\n  Dispatch<DISPATCH>\n] {\n  return [useSpaceBackgroundState(), useSpaceBackgroundDispatch()];\n}\n\nexport function setCanvasDimensions(\n  dispatch: Dispatch<DISPATCH>,\n  { width, height, canvas }: Canvas\n) {\n  canvas.setAttribute(\"width\", String(width));\n  canvas.setAttribute(\"height\", String(height));\n\n  return dispatch({\n    type: ACTION.SET_CANVAS_DIMENSIONS,\n    state: {\n      innerWidth: parseInt(String(width)),\n      innerHeight: parseInt(String(height)),\n    },\n  });\n}\n\nexport function fillStars(\n  dispatch: Dispatch<DISPATCH>,\n  { innerWidth, innerHeight, canvas, numStars }: SpaceBackground\n) {\n  const stars = [];\n\n  if (numStars) {\n    for (var i = 0; i < numStars; i++) {\n      var x = Math.round(Math.random() * (innerWidth ?? 0));\n      var y = Math.round(Math.random() * (innerHeight ?? 0));\n      var opacity = Math.random() * 0.5;\n\n      if (canvas) {\n        var star = new Star(x, y, opacity, canvas);\n        stars.push(star);\n      }\n    }\n\n    return dispatch({\n      type: ACTION.FILL_STARS,\n      state: { numStars, stars },\n    });\n  }\n}\n\nexport function renderStar(\n  dispatch: Dispatch<DISPATCH>,\n  { innerWidth = 0, innerHeight = 0, canvas, stars = [] }: SpaceBackground\n) {\n  if (canvas) {\n    let ctx = canvas.getContext(\"2d\");\n\n    ctx?.clearRect(0, 0, innerWidth, innerHeight);\n\n    stars.forEach(function(star) {\n      star.draw();\n    });\n\n    return dispatch({\n      type: ACTION.RENDER_STARS,\n      state: { stars },\n    });\n  }\n}\n\nexport default spaceBackgroundReducer;\n","import React, { useEffect, useRef } from \"react\";\nimport {\n  useSpaceBackgroundContext,\n  setCanvasDimensions,\n  fillStars,\n  renderStar,\n} from \"../Provider/SpaceBackground\";\n\ninterface Props extends React.CanvasHTMLAttributes<HTMLCanvasElement> {}\n\nexport const SpaceBackground: React.FC<Props> = ({\n  width = 0,\n  height = 0,\n  ...props\n}) => {\n  const [state, dispatch] = useSpaceBackgroundContext();\n  const { stars, numStars, innerWidth, innerHeight } = state;\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    function initCanvas() {\n      const canvas = canvasRef.current;\n\n      if (canvas) {\n        setCanvasDimensions(dispatch, {\n          width,\n          height,\n          canvas,\n        });\n      }\n    }\n\n    initCanvas();\n  }, [width, height, dispatch, canvasRef]);\n\n  useEffect(() => {\n    function initStars() {\n      const canvas = canvasRef.current;\n\n      if (canvas) {\n        fillStars(dispatch, {\n          canvas,\n          numStars,\n          innerWidth,\n          innerHeight,\n        });\n      }\n    }\n\n    initStars();\n  }, [numStars, innerWidth, innerHeight, dispatch, canvasRef]);\n\n  useEffect(() => {\n    function initRenderStars() {\n      const canvas = canvasRef.current;\n\n      if (canvas) {\n        renderStar(dispatch, {\n          canvas,\n          stars,\n          innerWidth,\n          innerHeight,\n        });\n      }\n    }\n\n    initRenderStars();\n  }, [stars, innerWidth, innerHeight, dispatch, canvasRef]);\n\n  return <canvas ref={canvasRef} {...props}></canvas>;\n};\n"],"names":["ACTION","Star","x","y","opacity","canvas","length","Math","floor","random","factor","increment","draw","ctx","this","getContext","beginPath","fillRect","closePath","fillStyle","fill","restore","initialContext","fps","numStars","innerWidth","innerHeight","stars","SpaceBackgroundStateContext","createContext","SpaceBackgroundDispatchContext","spaceBackgroundReducer","state","action","type","FILL_STARS","SET_CANVAS_DIMENSIONS","RENDER_STARS","ERROR","useSpaceBackgroundState","context","useContext","Error","useSpaceBackgroundDispatch","useSpaceBackgroundContext","setCanvasDimensions","dispatch","width","height","setAttribute","String","parseInt","fillStars","i","round","star","push","renderStar","clearRect","forEach","props","canvasRef","useRef","useEffect","current","React","ref","children","useReducer","Provider","value"],"mappings":"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"}