{"version":3,"file":"react-space-background.esm.js","sources":["../src/model/Star.ts","../src/interfaces/SpaceBackground.ts","../src/Provider/SpaceBackground.tsx","../src/space-background/SpaceBackground.tsx"],"sourcesContent":["export class Star {\n  private x: number;\n  private y: number;\n  private opacity: number;\n  private canvas: HTMLCanvasElement;\n  private length: number;\n  private factor: number;\n  private increment: number;\n\n  constructor(\n    x: number,\n    y: number,\n    opacity: number,\n    canvas: HTMLCanvasElement\n  ) {\n    this.x = x;\n    this.y = y;\n    this.opacity = opacity;\n    this.canvas = canvas;\n    this.length = Math.floor(Math.random() * 2) + 1;\n    this.factor = 1;\n    this.increment = Math.random() * 0.03;\n  }\n\n  draw() {\n    let ctx = this.canvas.getContext(\"2d\");\n\n    if (this.opacity > 1) {\n      this.factor = -1;\n    } else if (this.opacity <= 0) {\n      this.factor = 1;\n    }\n\n    this.opacity += this.increment * this.factor;\n\n    if (ctx) {\n      ctx.beginPath();\n      ctx.fillRect(this.x, this.y, this.length, this.length);\n      ctx.closePath();\n\n      ctx.fillStyle = \"rgba(255, 255, 255, 1)\";\n\n      ctx.fill();\n\n      ctx.restore();\n    }\n  }\n}\n\nexport default Star;\n","import { Star } from \"../model\";\n\nexport enum ACTION {\n  INIT = \"INIT\",\n  FILL_STARS = \"FILL_STARS\",\n  RENDER_STARS = \"RENDER_STARS\",\n  SET_CANVAS_DIMENSIONS = \"SET_CANVAS_DIMENSIONS\",\n  ERROR = \"ERROR\",\n}\n\nexport interface SpaceBackground {\n  fps?: number;\n  numStars?: number;\n  innerWidth?: number;\n  innerHeight?: number;\n  stars?: Star[];\n  canvas?: HTMLCanvasElement;\n}\n\nexport interface DISPATCH {\n  type?: ACTION;\n  state?: SpaceBackground;\n}\n\nexport interface CanvasDimensions {\n  width: string | number;\n  height: string | number;\n}\n\nexport interface Canvas extends CanvasDimensions {\n  canvas: HTMLCanvasElement;\n}\n","import React, { useContext, useReducer, createContext, Dispatch } from \"react\";\nimport { Star } from \"../model\";\nimport {\n  SpaceBackground,\n  ACTION,\n  DISPATCH,\n  Canvas,\n} from \"../interfaces/SpaceBackground\";\n\nexport const initialContext: SpaceBackground = {\n  fps: 50,\n  numStars: 300,\n  innerWidth: 0,\n  innerHeight: 0,\n  stars: [],\n};\n\nexport const SpaceBackgroundStateContext = createContext<SpaceBackground>(\n  initialContext\n);\n\nexport const SpaceBackgroundDispatchContext = createContext<Dispatch<DISPATCH>>(\n  () => {}\n);\n\nconst spaceBackgroundReducer = (state: SpaceBackground, action: DISPATCH) => {\n  switch (action.type) {\n    case ACTION.FILL_STARS:\n    case ACTION.SET_CANVAS_DIMENSIONS:\n      return {\n        ...state,\n        ...action.state,\n      };\n    case ACTION.RENDER_STARS:\n      return {\n        ...state,\n      };\n    case ACTION.ERROR:\n      return {\n        ...state,\n      };\n    default:\n      return state;\n  }\n};\n\nexport function SpaceBackgroundProvider({\n  children,\n  ...props\n}: {\n  children: any;\n}) {\n  const [state, dispatch] = useReducer(spaceBackgroundReducer, {\n    ...initialContext,\n  });\n\n  return (\n    <SpaceBackgroundStateContext.Provider value={state} {...props}>\n      <SpaceBackgroundDispatchContext.Provider value={dispatch}>\n        {children}\n      </SpaceBackgroundDispatchContext.Provider>\n    </SpaceBackgroundStateContext.Provider>\n  );\n}\n\nexport function useSpaceBackgroundState() {\n  const context = useContext(SpaceBackgroundStateContext);\n\n  if (!context) {\n    throw new Error(\n      \"useSpaceBackgroundState must be used after an SpaceBackgroundStateContext.Provider\"\n    );\n  }\n\n  return context;\n}\n\nexport function useSpaceBackgroundDispatch() {\n  const context = useContext(SpaceBackgroundDispatchContext);\n\n  if (!context) {\n    throw new Error(\n      \"useSpaceBackgroundDispatch must be used after and SpaceBackgroundDispatchContext.Provider\"\n    );\n  }\n\n  return context;\n}\n\nexport function useSpaceBackgroundContext(): [\n  SpaceBackground,\n  Dispatch<DISPATCH>\n] {\n  return [useSpaceBackgroundState(), useSpaceBackgroundDispatch()];\n}\n\nexport function setCanvasDimensions(\n  dispatch: Dispatch<DISPATCH>,\n  { width, height, canvas }: Canvas\n) {\n  canvas.setAttribute(\"width\", String(width));\n  canvas.setAttribute(\"height\", String(height));\n\n  return dispatch({\n    type: ACTION.SET_CANVAS_DIMENSIONS,\n    state: {\n      innerWidth: parseInt(String(width)),\n      innerHeight: parseInt(String(height)),\n    },\n  });\n}\n\nexport function fillStars(\n  dispatch: Dispatch<DISPATCH>,\n  { innerWidth, innerHeight, canvas, numStars }: SpaceBackground\n) {\n  const stars = [];\n\n  if (numStars) {\n    for (var i = 0; i < numStars; i++) {\n      var x = Math.round(Math.random() * (innerWidth ?? 0));\n      var y = Math.round(Math.random() * (innerHeight ?? 0));\n      var opacity = Math.random() * 0.5;\n\n      if (canvas) {\n        var star = new Star(x, y, opacity, canvas);\n        stars.push(star);\n      }\n    }\n\n    return dispatch({\n      type: ACTION.FILL_STARS,\n      state: { numStars, stars },\n    });\n  }\n}\n\nexport function renderStar(\n  dispatch: Dispatch<DISPATCH>,\n  { innerWidth = 0, innerHeight = 0, canvas, stars = [] }: SpaceBackground\n) {\n  if (canvas) {\n    let ctx = canvas.getContext(\"2d\");\n\n    ctx?.clearRect(0, 0, innerWidth, innerHeight);\n\n    stars.forEach(function(star) {\n      star.draw();\n    });\n\n    return dispatch({\n      type: ACTION.RENDER_STARS,\n      state: { stars },\n    });\n  }\n}\n\nexport default spaceBackgroundReducer;\n","import React, { useEffect, useRef } from \"react\";\nimport {\n  useSpaceBackgroundContext,\n  setCanvasDimensions,\n  fillStars,\n  renderStar,\n} from \"../Provider/SpaceBackground\";\n\ninterface Props extends React.CanvasHTMLAttributes<HTMLCanvasElement> {}\n\nexport const SpaceBackground: React.FC<Props> = ({\n  width = 0,\n  height = 0,\n  ...props\n}) => {\n  const [state, dispatch] = useSpaceBackgroundContext();\n  const { stars, numStars, innerWidth, innerHeight } = state;\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    function initCanvas() {\n      const canvas = canvasRef.current;\n\n      if (canvas) {\n        setCanvasDimensions(dispatch, {\n          width,\n          height,\n          canvas,\n        });\n      }\n    }\n\n    initCanvas();\n  }, [width, height, dispatch, canvasRef]);\n\n  useEffect(() => {\n    function initStars() {\n      const canvas = canvasRef.current;\n\n      if (canvas) {\n        fillStars(dispatch, {\n          canvas,\n          numStars,\n          innerWidth,\n          innerHeight,\n        });\n      }\n    }\n\n    initStars();\n  }, [numStars, innerWidth, innerHeight, dispatch, canvasRef]);\n\n  useEffect(() => {\n    function initRenderStars() {\n      const canvas = canvasRef.current;\n\n      if (canvas) {\n        renderStar(dispatch, {\n          canvas,\n          stars,\n          innerWidth,\n          innerHeight,\n        });\n      }\n    }\n\n    initRenderStars();\n  }, [stars, innerWidth, innerHeight, dispatch, canvasRef]);\n\n  return <canvas ref={canvasRef} {...props}></canvas>;\n};\n"],"names":["Star","x","y","opacity","canvas","length","Math","floor","random","factor","increment","draw","ctx","getContext","beginPath","fillRect","closePath","fillStyle","fill","restore","ACTION","initialContext","fps","numStars","innerWidth","innerHeight","stars","SpaceBackgroundStateContext","createContext","SpaceBackgroundDispatchContext","spaceBackgroundReducer","state","action","type","FILL_STARS","SET_CANVAS_DIMENSIONS","RENDER_STARS","ERROR","SpaceBackgroundProvider","children","props","useReducer","dispatch","React","Provider","value","useSpaceBackgroundState","context","useContext","Error","useSpaceBackgroundDispatch","useSpaceBackgroundContext","setCanvasDimensions","width","height","setAttribute","String","parseInt","fillStars","i","round","star","push","renderStar","clearRect","forEach","SpaceBackground","canvasRef","useRef","useEffect","initCanvas","current","initStars","initRenderStars","ref"],"mappings":"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"}